# ═══════════════════════════════════════════════════════════════════════════════
# BARAS Effect Definition Template
# ═══════════════════════════════════════════════════════════════════════════════
#
# This file demonstrates ALL available options for defining tracked effects
# (HOTs, shields, buffs, debuffs, procs, boss mechanics).
#
# Place effect definition files in: ~/.config/baras/effects/
# ═══════════════════════════════════════════════════════════════════════════════
#
# ─── Available Categories ─────────────────────────────────────────────────────
# "hot"        - Heal over Time (default: green [80, 200, 80, 255])
# "shield"     - Absorb shield/barrier (default: yellow [220, 180, 50, 255])
# "buff"       - Beneficial buff (default: blue [80, 140, 220, 255])
# "debuff"     - Harmful debuff (default: red [200, 60, 60, 255])
# "cleansable" - Dispellable effect (default: purple [180, 80, 200, 255])
# "proc"       - Temporary proc (default: cyan [80, 200, 220, 255])
# "mechanic"   - Boss mechanic on player (default: orange [255, 140, 60, 255])
#
# ─── Available Entity Filters (for source/target) ────────────────────────────
# "local_player"              - The log owner only (default)
# "local_companion"           - Local player's companion
# "local_player_or_companion" - Local player OR their companion
# "other_players"             - Other players (not local)
# "other_companions"          - Other players' companions
# "any_player"                - Any player (including local)
# "any_companion"             - Any companion (any player's)
# "any_player_or_companion"   - Any player or companion
# "group_members"             - Players in the local player's group
# "group_members_except_local"- Group members except local player
# "boss"                      - Boss NPCs specifically
# "npc_except_boss"           - Non-boss NPCs (trash mobs)
# "any_npc"                   - Any NPC (boss or trash)
# "any"                       - Any entity whatsoever
# { specific = "Player Name" }- Specific entity by name
# { specific_npc = 12345 }    - Specific NPC by class/template ID
# ═══════════════════════════════════════════════════════════════════════════════


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 1: Healer HOT (Kolto Probe)
# ═══════════════════════════════════════════════════════════════════════════════
# Track your HOTs on group members, show on raid frames

[[effect]]
id = "kolto_probe"
name = "Kolto Probe"
enabled = true                          # Default: true

# ─── Matching ─────────────────────────────────────────────────────────────────
effect_ids = [807388716163072]          # Game effect ID(s) that match this
refresh_abilities = [807388716163073]   # Ability IDs that can refresh this effect

# ─── Filtering ────────────────────────────────────────────────────────────────
source = "local_player"                 # Only track when YOU apply it
target = "group_members"                # Only track on group members

# ─── Duration ─────────────────────────────────────────────────────────────────
duration_secs = 18.0                    # Expected duration (None = indefinite)
can_be_refreshed = true                 # Reset timer on reapplication (default: true)

# ─── Display ──────────────────────────────────────────────────────────────────
category = "hot"                        # Determines default color (green)
# color = [80, 200, 80, 255]            # Optional: override color [R, G, B, A]
max_stacks = 2                          # Show stack count (0 = don't show)
show_on_raid_frames = true              # Show indicator on raid frames
show_on_effects_overlay = false         # Show on countdown overlay

# ─── Behavior ─────────────────────────────────────────────────────────────────
persist_past_death = false              # Remove when target dies (default: false)
track_outside_combat = true             # Track even outside combat (default: true)

# ─── Timer Integration (NOT YET IMPLEMENTED) ─────────────────────────────────
# These fields exist in the schema but are not wired up yet.
# on_apply_trigger_timer = "some_timer" # PLANNED: Start timer when effect applied
# on_expire_trigger_timer = "cd_timer"  # PLANNED: Start timer when effect expires

# ─── Context ──────────────────────────────────────────────────────────────────
encounters = []                         # Empty = track everywhere

# ─── Alerts ───────────────────────────────────────────────────────────────────
alert_near_expiration = true            # Show warning before expiry
alert_threshold_secs = 3.0              # Seconds before expiry to warn (default: 3.0)


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 2: Shield/Barrier Effect
# ═══════════════════════════════════════════════════════════════════════════════

[[effect]]
id = "static_barrier"
name = "Static Barrier"

effect_ids = [812639371927552]
refresh_abilities = []                  # Cannot be refreshed while active

source = "local_player"
target = "any_player"                   # Track on any player you shield

duration_secs = 30.0
can_be_refreshed = false                # Has internal cooldown per target

category = "shield"                     # Yellow/gold color
max_stacks = 0                          # No stacks
show_on_raid_frames = true
show_on_effects_overlay = true          # Also show on effects overlay

alert_near_expiration = false


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 3: Self Buff/Proc
# ═══════════════════════════════════════════════════════════════════════════════

[[effect]]
id = "recklessness"
name = "Recklessness"

effect_ids = [807245776920576]

source = "local_player"
target = "local_player"                 # Self-buff

duration_secs = 20.0
can_be_refreshed = false

category = "proc"                       # Cyan color
color = [255, 200, 50, 255]             # Override with custom gold
max_stacks = 2                          # Tracks charges
show_on_raid_frames = false
show_on_effects_overlay = true          # Show countdown

persist_past_death = false
track_outside_combat = true


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 4: Debuff on Enemy
# ═══════════════════════════════════════════════════════════════════════════════

[[effect]]
id = "armor_reduction"
name = "Armor Debuff"

effect_ids = [123456789012345]

source = "local_player"
target = "any_npc"                      # Track on any NPC you debuff

duration_secs = 45.0
can_be_refreshed = true

category = "debuff"                     # Red color
max_stacks = 5
show_on_raid_frames = false             # Don't show NPC debuffs on raid frames
show_on_effects_overlay = true


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 5: Boss Mechanic on Player
# ═══════════════════════════════════════════════════════════════════════════════
# Track when boss applies a mechanic debuff to any player

[[effect]]
id = "doom_mark"
name = "Doom"

effect_ids = [3302391763959810]

source = "boss"                         # Applied BY boss
target = "any_player"                   # Applied TO any player

duration_secs = 10.0
can_be_refreshed = false

category = "mechanic"                   # Orange color
max_stacks = 0
show_on_raid_frames = true              # Important to see who has it
show_on_effects_overlay = true

# Only track in specific encounters
encounters = ["dread_master_bestia"]

alert_near_expiration = true
alert_threshold_secs = 5.0


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 6: Cleansable Debuff
# ═══════════════════════════════════════════════════════════════════════════════

[[effect]]
id = "affliction"
name = "Affliction"

effect_ids = [807890123456789]

source = "any_npc"                      # Applied by any NPC
target = "group_members"                # Track on group members

duration_secs = 18.0

category = "cleansable"                 # Purple - signals "cleanse this!"
show_on_raid_frames = true
show_on_effects_overlay = false

alert_near_expiration = false           # No need to warn, just cleanse it


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 7: Buff from Any Source
# ═══════════════════════════════════════════════════════════════════════════════
# Track a raid buff regardless of who applies it

[[effect]]
id = "inspiration"
name = "Inspiration"

effect_ids = [808123456789012]

source = "any_player"                   # Anyone can apply this
target = "local_player"                 # Track when YOU have it

duration_secs = 10.0
can_be_refreshed = true

category = "buff"                       # Blue color
show_on_raid_frames = false
show_on_effects_overlay = true

track_outside_combat = false            # Only matters in combat


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 8: Personal Cooldown/Proc Tracking
# ═══════════════════════════════════════════════════════════════════════════════
# Track a personal buff like adrenal, relic proc, etc.

[[effect]]
id = "adrenal"
name = "Adrenal"

effect_ids = [809234567890123]

source = "local_player"
target = "local_player"

duration_secs = 15.0
can_be_refreshed = false

category = "proc"
show_on_effects_overlay = true

# NOTE: Timer integration is NOT YET IMPLEMENTED
# These fields exist in the schema but are not wired up:
# on_apply_trigger_timer = "some_timer"
# on_expire_trigger_timer = "adrenal_cooldown"


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 9: Companion Effect
# ═══════════════════════════════════════════════════════════════════════════════

[[effect]]
id = "companion_heal"
name = "Companion Heal"

effect_ids = [810345678901234]

source = "local_companion"              # Applied BY your companion
target = "local_player_or_companion"    # To you or your companion

duration_secs = 12.0

category = "hot"
show_on_raid_frames = false
show_on_effects_overlay = true


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 10: Specific NPC Effect
# ═══════════════════════════════════════════════════════════════════════════════
# Track effect only when applied by a specific NPC

[[effect]]
id = "bestia_scream_debuff"
name = "Dread Scream"

effect_ids = [3302391763959811]

source = { specific_npc = 3273941900591104 }  # Only from Bestia
target = "any_player"

duration_secs = 6.0

category = "mechanic"
show_on_raid_frames = true
show_on_effects_overlay = true

encounters = ["dread_master_bestia"]


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 11: Specific Player Target
# ═══════════════════════════════════════════════════════════════════════════════
# Track effect only on a specific player (e.g., tank monitoring)

[[effect]]
id = "tank_guard"
name = "Guard on Tank"

effect_ids = [811456789012345]

source = "local_player"
target = { specific = "TankPlayerName" }  # Only track on specific player

duration_secs = 0                       # Indefinite duration (toggle ability)

category = "buff"
show_on_raid_frames = true


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 12: Indefinite Duration Effect
# ═══════════════════════════════════════════════════════════════════════════════

[[effect]]
id = "stealth"
name = "Stealth"

effect_ids = [812567890123456]

source = "local_player"
target = "local_player"

# duration_secs not set = indefinite/unknown duration

category = "buff"
show_on_raid_frames = false
show_on_effects_overlay = true

track_outside_combat = true
persist_past_death = false


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 13: Effect That Persists Past Death
# ═══════════════════════════════════════════════════════════════════════════════

[[effect]]
id = "battle_rez_debuff"
name = "Recently Revived"

effect_ids = [813678901234567]

source = "any_player"
target = "local_player"

duration_secs = 300.0                   # 5 minutes

category = "debuff"
persist_past_death = true               # Stays even if you die again

show_on_effects_overlay = true


# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLE 14: Other Players' Effects (Raid Awareness)
# ═══════════════════════════════════════════════════════════════════════════════
# Track what other healers put on group members

[[effect]]
id = "other_healer_hot"
name = "Other Healer HOT"

effect_ids = [807388716163072]          # Same effect ID

source = "other_players"                # Only when OTHERS apply it
target = "group_members"                # To group members

duration_secs = 18.0

category = "hot"
color = [100, 150, 100, 200]            # Slightly different shade
show_on_raid_frames = true              # See their HOTs on frames
show_on_effects_overlay = false


# ═══════════════════════════════════════════════════════════════════════════════
# NOTES
# ═══════════════════════════════════════════════════════════════════════════════
#
# Finding Effect IDs:
# - Effect IDs appear in combat logs when effects are applied/removed
# - Look for ApplyEffect/RemoveEffect lines
#
# Finding Ability IDs (for refresh_abilities):
# - Ability IDs appear in combat logs in the third bracketed segment
# - Use refresh_abilities when an ability refreshes the effect duration
#   but doesn't trigger a new ApplyEffect event
#
# Best Practices:
# - Use specific source/target filters to reduce noise
# - Set show_on_raid_frames = true for effects healers need to track
# - Set show_on_effects_overlay = true for personal cooldowns/procs
# - Use encounters filter to limit boss-specific mechanics
# - Use category to get appropriate default colors
# - Override color only when you need a specific visual distinction
#
# Display Priority:
# - Raid frames show effects with show_on_raid_frames = true
# - Effects overlay shows effects with show_on_effects_overlay = true
# - Both can be true for maximum visibility
#
# File Location:
# - User configs: ~/.config/baras/effects/*.toml
# - Built-in configs: Bundled with the application
#
