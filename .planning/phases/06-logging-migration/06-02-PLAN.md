---
phase: 06-logging-migration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - core/src/timers/mod.rs
  - core/src/timers/manager.rs
  - core/src/context/parser.rs
  - core/src/dsl/loader.rs
autonomous: true

must_haves:
  truths:
    - "Zero eprintln! calls in core/src/timers/ (excluding tests)"
    - "Zero eprintln! calls in core/src/context/parser.rs"
    - "Zero eprintln! calls in core/src/dsl/loader.rs"
    - "Errors logged at error level, warnings at warn level, info operations at info level"
  artifacts:
    - path: "core/src/timers/manager.rs"
      provides: "Timer loading and management with structured logging"
      contains: "tracing::"
    - path: "core/src/dsl/loader.rs"
      provides: "DSL loading with structured logging"
      contains: "tracing::"
  key_links:
    - from: "core/src/timers/manager.rs"
      to: "tracing"
      via: "use tracing"
      pattern: "use tracing"
---

<objective>
Migrate core crate eprintln! calls to tracing macros

Purpose: Core crate diagnostics should use structured logging so they appear in the app's log files with proper levels and context.

Output: All production eprintln! in core/src/timers/, core/src/context/parser.rs, and core/src/dsl/loader.rs converted to appropriate tracing macros.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-logging-migration/06-CONTEXT.md
@.planning/phases/06-logging-migration/06-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate timers module eprintln! calls</name>
  <files>core/src/timers/mod.rs, core/src/timers/manager.rs</files>
  <action>
Migrate all eprintln! in timers/ (excluding manager_tests.rs) to tracing.

**core/src/timers/mod.rs (~3 calls):**
- `Warning: {}` -> `tracing::warn!(error = %e, "...")`
- `Loaded {} timers from {:?}` -> `tracing::info!(count = timers.len(), path = ?path.file_name(), "Loaded timer definitions")`

**core/src/timers/manager.rs (~10 calls):**
Level mapping per CONTEXT.md:
- Duplicate timer ID warning -> `tracing::warn!(timer_id = %def.id, "Duplicate timer ID, keeping first")`
- Missing chain target -> `tracing::warn!(timer_id = %id, chains_to = %missing, "Broken timer chain reference")`
- Loaded definitions count -> `tracing::info!(count = ..., "Loaded enabled timer definitions")`
- Debug state info -> `tracing::debug!(...)` or `tracing::trace!(...)`

Add `use tracing;` at top of each file if not present.

DO NOT modify manager_tests.rs - test code keeps eprintln!.
  </action>
  <verify>`grep -r "eprintln!" core/src/timers/ --include="*.rs" | grep -v "_tests.rs"` returns empty</verify>
  <done>Zero eprintln! in timers module production code</done>
</task>

<task type="auto">
  <name>Task 2: Migrate context/parser.rs and dsl/loader.rs</name>
  <files>core/src/context/parser.rs, core/src/dsl/loader.rs</files>
  <action>
Migrate all eprintln! in these files to tracing.

**core/src/context/parser.rs (~3 calls):**
- Parse warnings -> `tracing::warn!(...)`
- Parse errors -> `tracing::error!(...)`

**core/src/dsl/loader.rs (~8 calls, excluding test block):**
- `Warning: {}` when loading fails -> `tracing::warn!(error = %e, "...")`
- `Loaded boss: {} (area: {})` -> `tracing::info!(boss = %boss.name, area = %boss.area_name, "Loaded boss definition")`
- Loading count summaries -> `tracing::info!(count = ..., "Loaded X definitions")`

Add `use tracing;` at top of each file.

DO NOT modify test functions or test fixtures - look for `#[cfg(test)]` blocks.
  </action>
  <verify>
`grep "eprintln!" core/src/context/parser.rs` returns empty (or only test code)
`grep "eprintln!" core/src/dsl/loader.rs | grep -v "test"` returns empty
  </verify>
  <done>Zero eprintln! in context/parser.rs and dsl/loader.rs production code</done>
</task>

</tasks>

<verification>
- [ ] `grep -rn "eprintln!" core/src/timers/ | grep -v "_tests.rs"` returns nothing
- [ ] `grep -n "eprintln!" core/src/context/parser.rs` returns only test code (if any)
- [ ] `grep -n "eprintln!" core/src/dsl/loader.rs` returns only test code (if any)
- [ ] `cargo check -p baras-core` compiles without errors
- [ ] Each converted call uses appropriate level (error/warn/info/debug)
</verification>

<success_criteria>
1. All production eprintln! in core/src/timers/ converted to tracing
2. All production eprintln! in core/src/context/parser.rs converted
3. All production eprintln! in core/src/dsl/loader.rs converted
4. Test code unchanged
5. Log levels follow CONTEXT.md mapping (errors at error, warnings at warn, DSL CRUD at info)
</success_criteria>

<output>
After completion, create `.planning/phases/06-logging-migration/06-02-SUMMARY.md`
</output>
