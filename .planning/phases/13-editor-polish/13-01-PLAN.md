---
phase: 13-editor-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/src/components/effect_editor.rs
  - app/assets/styles.css
autonomous: true

must_haves:
  truths:
    - "User hovers over Display Target field and sees tooltip explaining which overlay shows the effect"
    - "User hovers over Trigger field and sees tooltip explaining trigger behavior"
    - "User sees form fields grouped into visual cards with distinct headers"
    - "User sees guidance text when no effects exist"
  artifacts:
    - path: "app/src/components/effect_editor.rs"
      provides: "Effect editor with tooltips and card sections"
      contains: "title:"
    - path: "app/assets/styles.css"
      provides: "Card styling for form sections"
      contains: ".form-card"
  key_links:
    - from: "app/src/components/effect_editor.rs"
      to: "app/assets/styles.css"
      via: "CSS class references"
      pattern: "form-card"
---

<objective>
Add tooltips to effect editor form fields and implement visual hierarchy via card-based sections.

Purpose: Make the Effects Editor intuitive for users who don't know what each field does. Clear visual grouping makes complex forms scannable.

Output: Effect editor with tooltips on ambiguous fields and card-based section grouping.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-editor-polish/13-CONTEXT.md
@.planning/phases/13-editor-polish/13-RESEARCH.md
@app/src/components/effect_editor.rs
@app/assets/styles.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add CSS for form cards and help icons</name>
  <files>app/assets/styles.css</files>
  <action>
Add CSS for card-based form sections and help indicator icons. Add at end of styles.css before closing comments.

Add these classes:
```css
/* ═══════════════════════════════════════════════════════════════════════════════
   FORM CARDS - Visual hierarchy for editor forms
   ═══════════════════════════════════════════════════════════════════════════════ */

.form-card {
  background: var(--bg-mid);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  margin-bottom: var(--space-md);
}

.form-card-header {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  background: rgba(255, 255, 255, 0.03);
  border-bottom: 1px solid var(--border-subtle);
  font-size: 0.85em;
  font-weight: 500;
  color: var(--text-secondary);
}

.form-card-header i {
  color: var(--swtor-blue-dim);
  font-size: 0.9em;
}

.form-card-content {
  padding: var(--space-md);
}

/* Help icon for tooltip indication */
.help-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  font-size: 10px;
  background: var(--bg-light);
  border: 1px solid var(--border-light);
  border-radius: 50%;
  color: var(--text-muted);
  cursor: help;
  margin-left: var(--space-xs);
}

.help-icon:hover {
  color: var(--swtor-blue);
  border-color: var(--border-accent-medium);
}

/* Empty state guidance for editors */
.empty-state-guidance {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-xl) var(--space-lg);
  text-align: center;
  color: var(--text-muted);
}

.empty-state-guidance .empty-state-icon {
  font-size: 2em;
  color: var(--text-disabled);
  margin-bottom: var(--space-sm);
}

.empty-state-guidance p {
  margin: var(--space-xs) 0;
}

.empty-state-guidance .hint {
  font-size: 0.85em;
  color: var(--text-disabled);
}
```
  </action>
  <verify>grep -n "form-card" app/assets/styles.css shows the new classes</verify>
  <done>CSS classes for form-card, form-card-header, form-card-content, help-icon, and empty-state-guidance exist in styles.css</done>
</task>

<task type="auto">
  <name>Task 2: Add tooltips to effect editor form fields</name>
  <files>app/src/components/effect_editor.rs</files>
  <action>
Add native `title` attributes to ambiguous form field labels in EffectEditForm component. Use functional tone per CONTEXT.md.

Fields to add tooltips (with help icon pattern):

1. **Display Target** (around line 709-735):
   Change from `label { "Display Target" }` to:
   ```rust
   label { class: "flex items-center",
       "Display Target"
       span {
           class: "help-icon",
           title: "Sets which overlay displays this effect when triggered",
           "?"
       }
   }
   ```

2. **Trigger** (around line 738-791):
   ```rust
   label { class: "flex items-center",
       "Trigger"
       span {
           class: "help-icon",
           title: "How this effect activates: Effect-based tracks game buffs/debuffs, Ability-based tracks when abilities are cast",
           "?"
       }
   }
   ```

3. **Source** (around line 794-805):
   ```rust
   label { class: "flex items-center",
       "Source"
       span {
           class: "help-icon",
           title: "Who must cast/apply for this effect to trigger (e.g., Local Player = you, Any = anyone)",
           "?"
       }
   }
   ```

4. **Target** (around line 806-817):
   ```rust
   label { class: "flex items-center",
       "Target"
       span {
           class: "help-icon",
           title: "Who must receive this effect for it to trigger (e.g., Any = track on anyone, Local Player = only on you)",
           "?"
       }
   }
   ```

5. **Duration** (around line 820-835):
   Add tooltip to explain manual duration:
   ```rust
   label { class: "flex items-center",
       "Duration"
       span {
           class: "help-icon",
           title: "How long the effect displays (seconds). Set to 0 for effects that track via game events",
           "?"
       }
   }
   ```

6. **Show at** (around line 836-855):
   ```rust
   label { class: "flex items-center",
       "Show at"
       span {
           class: "help-icon",
           title: "Only display the effect when this many seconds remain",
           "?"
       }
   }
   ```

7. **Alert On** (around line 1096-1118):
   ```rust
   label { class: "flex items-center",
       "Alert On"
       span {
           class: "help-icon",
           title: "When to show alert text: on effect start, on effect end, or never",
           "?"
       }
   }
   ```

Also add tooltips to key checkbox labels that are non-obvious:
- "Fixed Duration - ignore effect removed after applied" - title: "Use the duration timer instead of tracking when the game removes the effect"
- "Refresh Duration When Charges Modified" - title: "Reset timer when effect stacks change"
- "Persist Past Death" - title: "Keep showing effect after player dies"
- "Track Outside Combat" - title: "Continue tracking this effect between combat encounters"
  </action>
  <verify>grep -n 'title:.*help-icon\|help-icon.*title:' app/src/components/effect_editor.rs shows multiple tooltip definitions</verify>
  <done>Effect editor form fields (Display Target, Trigger, Source, Target, Duration, Show at, Alert On) have help-icon tooltips with functional descriptions</done>
</task>

<task type="auto">
  <name>Task 3: Add card-based visual hierarchy and empty state guidance</name>
  <files>app/src/components/effect_editor.rs</files>
  <action>
1. **Update empty state** (around line 427-434):
   Change from:
   ```rust
   div { class: "effect-empty",
       if effects().is_empty() {
           "No effect definitions found"
       } else {
           "No effects match your search"
       }
   }
   ```
   To:
   ```rust
   if effects().is_empty() {
       div { class: "empty-state-guidance",
           div { class: "empty-state-icon",
               i { class: "fa-solid fa-sparkles" }
           }
           p { "No effects defined yet" }
           p { class: "hint", "Click \"+ New Effect\" above to create your first effect" }
       }
   } else {
       div { class: "effect-empty", "No effects match your search" }
   }
   ```

2. **Wrap EffectEditForm left column sections in cards** (inside EffectEditForm around line 664-894):
   Group related fields into card sections per CONTEXT.md:

   Section 1 - Identity (name, display_text, display_target):
   ```rust
   div { class: "form-card",
       div { class: "form-card-header",
           i { class: "fa-solid fa-tag" }
           span { "Identity" }
       }
       div { class: "form-card-content",
           // Effect ID (if not draft)
           // Name field
           // Display Text field
           // Display Target field
       }
   }
   ```

   Section 2 - Trigger (trigger type, when, source, target, effects/abilities):
   ```rust
   div { class: "form-card",
       div { class: "form-card-header",
           i { class: "fa-solid fa-bolt" }
           span { "Trigger" }
       }
       div { class: "form-card-content",
           // Trigger Type + When
           // Source + Target
           // Effects/Abilities editor
           // Refresh Abilities
       }
   }
   ```

   Section 3 - Timing (duration, show_at):
   ```rust
   div { class: "form-card",
       div { class: "form-card-header",
           i { class: "fa-solid fa-clock" }
           span { "Timing" }
       }
       div { class: "form-card-content",
           // Duration + Show at fields
       }
   }
   ```

Note: Keep the right column (checkboxes) as-is without cards - they're already visually distinct. Only add cards to the left column form fields.
  </action>
  <verify>grep -n "form-card" app/src/components/effect_editor.rs shows card sections for Identity, Trigger, and Timing</verify>
  <done>Effect editor has card-based visual hierarchy with Identity, Trigger, and Timing sections, plus empty state guidance</done>
</task>

</tasks>

<verification>
1. `cargo check -p baras-app` compiles without errors
2. `grep -n "form-card" app/src/components/effect_editor.rs` shows 3+ card sections
3. `grep -n "help-icon" app/src/components/effect_editor.rs` shows 7+ tooltip definitions
4. `grep -n "empty-state-guidance" app/src/components/effect_editor.rs` shows the guidance pattern
</verification>

<success_criteria>
1. Effect editor compiles without errors
2. Form fields have help-icon tooltips on Display Target, Trigger, Source, Target, Duration, Show at, Alert On
3. Form sections are grouped into visual cards (Identity, Trigger, Timing)
4. Empty state shows guidance message with "Click + New Effect" instruction
5. EDIT-04 verified complete (new effects already appear at top - draft rendered first)
</success_criteria>

<output>
After completion, create `.planning/phases/13-editor-polish/13-01-SUMMARY.md`
</output>
